import Button from "@mui/material/Button";
import TextField from "@mui/material/TextField";
import Stack from "@mui/material/Stack";
import Card from "@mui/material/Card";
import Table from "@mui/material/Table";
import TableBody from "@mui/material/TableBody";
import TableCell from "@mui/material/TableCell";
import TableContainer from "@mui/material/TableContainer";
import TableHead from "@mui/material/TableHead";
import TableRow from "@mui/material/TableRow";
import Paper from "@mui/material/Paper";
import React from "react";
import { SvgIcon } from "@mui/material";

function createData(glycemie: string, units: number) {
	return { glycemie, units };
}

const rows = [
	createData("< 2,5", 0),
	createData("< 3", 4),
	createData("< 4", 6),
	createData("< 5", 8),
	createData("> 5", 10),
];

function App() {
	const [glycemie, setGlycemie] = React.useState<string>("");
	const [units, setUnits] = React.useState<number | null>(null);

	const calculateUnits = () => {
		setUnits(null);
		if (glycemie == "") return;

		const glycemieNumber = parseFloat(glycemie);

		const numberOfUnitsToAdd =
			glycemieNumber < 2.5
				? 0
				: glycemieNumber < 3
				? 4
				: glycemieNumber < 4
				? 6
				: glycemieNumber < 5
				? 8
				: glycemieNumber > 5
				? 10
				: null;
		setUnits(numberOfUnitsToAdd);
	};

	const onChangeGlycemie = (event: React.ChangeEvent<HTMLInputElement>) => {
		setGlycemie(event.target.value);
	};
	return (
		<>
			<Card
				variant='outlined'
				sx={{
					width: "100%",
					height: "100%",
					padding: "2rem",
					boxSizing: "border-box",
				}}>
				<Stack spacing={2} marginBottom={3}>
					<TextField
						id='standard-select-currency-native'
						label='Glycémie'
						value={glycemie ?? ""}
						helperText='Renseignez votre glycémie'
						variant='filled'
						type='number'
						onChange={onChangeGlycemie}
					/>

					<Button variant='contained' onClick={calculateUnits}>
						Calculer nombre d'unités
					</Button>
				</Stack>
				<Stack direction={"row"} justifyContent={"center"} spacing={1}>
					<SvgIcon inheritViewBox sx={{ fontSize: "4rem" }}>
						<svg viewBox='1 -20 479.99829 479' xmlns='http://www.w3.org/2000/svg'>
							<path
								d='m320 128.597656c-3.238281 0-6.152344-1.949218-7.390625-4.9375-1.238281-2.992187-.554687-6.429687 1.734375-8.71875l112-112c2.007812-2.078125 4.980469-2.9140622 7.777344-2.179687 2.796875.730469 4.984375 2.914062 5.714844 5.710937.730468 2.796875-.101563 5.773438-2.183594 7.78125l-112 112c-1.496094 1.5-3.53125 2.34375-5.652344 2.34375zm0 0'
								fill='#5a6470'
							/>
							<path
								d='m280 128.597656-40 16-136 136 56 56 136-136 16-40zm0 0'
								fill='#7fcac9'
							/>
							<path
								d='m280 128.597656 24.003906-24 32 32-24 24.003906zm0 0'
								fill='#7d8d9c'
							/>
							<path
								d='m64 288.597656 24-24 88 87.996094-24.003906 24.003906zm0 0'
								fill='#7d8d9c'
							/>
							<path
								d='m47.078125 359.671875 44-44 33.941406 33.941406-44 44zm0 0'
								fill='#cfdfe8'
							/>
							<g fill='#7d8d9c'>
								<path d='m7.996094 368.59375 24.003906-24 64 64-24 24.003906zm0 0' />
								<path d='m288 216.597656c-2.125 0-4.15625-.84375-5.65625-2.34375l-24-24c-3.035156-3.140625-2.988281-8.128906.097656-11.214844 3.085938-3.085937 8.074219-3.128906 11.210938-.097656l24 24c2.289062 2.289063 2.972656 5.726563 1.734375 8.71875-1.238281 2.988282-4.152344 4.9375-7.386719 4.9375zm0 0' />
								<path d='m264 240.597656c-2.125 0-4.15625-.84375-5.65625-2.34375l-16-16c-3.035156-3.140625-2.988281-8.128906.097656-11.214844 3.085938-3.085937 8.074219-3.128906 11.210938-.097656l16 16c2.289062 2.289063 2.972656 5.726563 1.734375 8.71875-1.238281 2.988282-4.152344 4.9375-7.386719 4.9375zm0 0' />
								<path d='m240 264.597656c-2.125 0-4.15625-.84375-5.65625-2.34375l-32-32c-3.035156-3.140625-2.988281-8.128906.097656-11.214844 3.085938-3.085937 8.074219-3.128906 11.210938-.097656l32 32c2.289062 2.289063 2.972656 5.726563 1.734375 8.71875-1.238281 2.988282-4.152344 4.9375-7.386719 4.9375zm0 0' />
								<path d='m216 288.597656c-2.125 0-4.15625-.84375-5.65625-2.34375l-16-16c-3.035156-3.140625-2.988281-8.128906.097656-11.214844 3.085938-3.085937 8.074219-3.128906 11.210938-.097656l16 16c2.289062 2.289063 2.972656 5.726563 1.734375 8.71875-1.238281 2.988282-4.152344 4.9375-7.386719 4.9375zm0 0' />
								<path d='m192 312.597656c-2.125 0-4.15625-.84375-5.65625-2.34375l-24-24c-3.035156-3.140625-2.988281-8.128906.097656-11.214844 3.085938-3.085937 8.074219-3.128906 11.210938-.097656l24 24c2.289062 2.289063 2.972656 5.726563 1.734375 8.71875-1.238281 2.988282-4.152344 4.9375-7.386719 4.9375zm0 0' />
							</g>
							<path
								d='m472 120.597656c0 17.671875-14.328125 32-32 32-17.675781 0-32-14.328125-32-32s32-56 32-56 32 38.328125 32 56zm0 0'
								fill='#87cee9'
							/>
							<path
								d='m424 240.597656c0 17.671875-14.328125 32-32 32-17.675781 0-32-14.328125-32-32s32-56 32-56 32 38.328125 32 56zm0 0'
								fill='#87cee9'
							/>
							<path d='m66.34375 438.253906c3.121094 3.121094 8.1875 3.121094 11.308594 0l24-24c3.125-3.125 3.125-8.1875 0-11.3125l-9.324219-9.328125 32.6875-32.6875 21.328125 21.328125c3.121094 3.121094 8.1875 3.121094 11.308594 0l24-24c3.125-3.125 3.125-8.1875 0-11.3125l-10.34375-10.34375 130.34375-130.34375c.765625-.765625 1.371094-1.679687 1.777344-2.679687l15.394531-38.488281 22.828125-22.832032c3.125-3.125 3.125-8.1875 0-11.3125l-10.34375-10.34375 106.34375-106.34375c2.082031-2.007812 2.914062-4.984375 2.183594-7.78125-.730469-2.796875-2.917969-4.980468-5.714844-5.710937-2.796875-.7343752-5.769532.101562-7.777344 2.179687l-106.34375 106.34375-10.347656-10.34375c-3.121094-3.121094-8.1875-3.121094-11.308594 0l-22.839844 22.832032-38.472656 15.390624c-1.007812.40625-1.921875 1.011719-2.6875 1.777344l-130.34375 130.34375-10.347656-10.34375c-3.121094-3.121094-8.1875-3.121094-11.308594 0l-24 24c-3.125 3.125-3.125 8.1875 0 11.3125l21.421875 21.421875-32.6875 32.691407-9.425781-9.425782c-3.121094-3.121094-8.1875-3.121094-11.308594 0l-24 24c-3.125 3.125-3.125 8.1875 0 11.3125zm237.65625-322.34375 20.6875 20.6875-12.6875 12.6875-20.691406-20.6875zm-59.503906 35.503906 33.597656-13.433593 24.535156 24.546875-13.429687 33.597656-1.199219 1.160156-18.347656-18.34375c-3.136719-3.03125-8.125-2.988281-11.210938.097656-3.085937 3.085938-3.132812 8.074219-.097656 11.214844l18.34375 18.34375-12.6875 12.6875-10.347656-10.34375c-3.136719-3.03125-8.125-2.988281-11.210938.097656-3.085937 3.085938-3.132812 8.074219-.097656 11.214844l10.34375 10.34375-12.6875 12.6875-26.347656-26.34375c-3.136719-3.03125-8.125-2.988281-11.210938.097656-3.085937 3.085938-3.132812 8.074219-.097656 11.214844l26.34375 26.34375-12.6875 12.6875-10.347656-10.34375c-3.136719-3.03125-8.125-2.988281-11.210938.097656-3.085937 3.085938-3.132812 8.074219-.097656 11.214844l10.34375 10.34375-12.6875 12.6875-18.347656-18.34375c-3.136719-3.03125-8.125-2.988281-11.210938.097656-3.085937 3.085938-3.132812 8.074219-.097656 11.214844l18.34375 18.34375-20.6875 20.6875-44.691406-44.6875zm-169.1875 137.183594 12.691406-12.6875 76.6875 76.6875-12.6875 12.6875zm15.769531 38.398438 22.625 22.625-32.6875 32.6875-22.617187-22.632813zm-59.078125 28.914062 52.6875 52.6875-12.6875 12.6875-52.691406-52.6875zm0 0' />
							<path d='m433.855469 59.46875c-5.65625 6.777344-33.855469 41.542969-33.855469 61.128906 0 22.089844 17.90625 40 40 40 22.089844 0 40-17.910156 40-40 0-19.585937-28.203125-54.351562-33.859375-61.128906-1.566406-1.738281-3.800781-2.730469-6.140625-2.730469-2.34375 0-4.574219.992188-6.144531 2.730469zm6.144531 85.128906c-13.257812 0-24-10.746094-24-24 0-8.585937 12.550781-28.230468 24-43.199218 11.445312 14.925781 24 34.574218 24 43.199218 0 13.253906-10.746094 24-24 24zm0 0' />
							<path d='m398.140625 179.46875c-1.566406-1.738281-3.800781-2.730469-6.140625-2.730469-2.34375 0-4.574219.992188-6.144531 2.730469-5.65625 6.777344-33.855469 41.542969-33.855469 61.128906 0 22.089844 17.90625 40 40 40 22.089844 0 40-17.910156 40-40 0-19.585937-28.203125-54.351562-33.859375-61.128906zm-6.140625 85.128906c-13.257812 0-24-10.746094-24-24 0-8.585937 12.550781-28.230468 24-43.199218 11.445312 14.925781 24 34.574218 24 43.199218 0 13.253906-10.746094 24-24 24zm0 0' />
						</svg>
					</SvgIcon>
					<div style={{ fontSize: "4rem" }}>{units ?? "?"}</div>
				</Stack>
			</Card>

			<TableContainer component={Paper}>
				<Table aria-label='simple table'>
					<TableHead>
						<TableRow>
							<TableCell>Règle de glycémie</TableCell>
							<TableCell align='right'>Nombre d'unités à ajouter</TableCell>
						</TableRow>
					</TableHead>
					<TableBody>
						{rows.map((row) => (
							<TableRow
								key={row.glycemie}
								sx={{ "&:last-child td, &:last-child th": { border: 0 } }}>
								<TableCell component='th' scope='row'>
									{row.glycemie}
								</TableCell>
								<TableCell align='right'>{row.units}</TableCell>
							</TableRow>
						))}
					</TableBody>
				</Table>
			</TableContainer>
		</>
	);
}

export default App;
